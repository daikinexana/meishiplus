#!/bin/bash

echo "ğŸ” å¼·åˆ¶çš„ã«Next.jsãƒ—ãƒ­ã‚»ã‚¹ã‚’åœæ­¢ã—ã¾ã™..."

# ãƒãƒ¼ãƒˆ3000-3010ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã‚’å…¨ã¦åœæ­¢
for port in {3000..3010}; do
  PIDS=$(lsof -ti:$port 2>/dev/null)
  if [ ! -z "$PIDS" ]; then
    echo "ğŸ“Œ Port $port ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚»ã‚¹: $PIDS"
    kill -9 $PIDS 2>/dev/null
    echo "âœ… ãƒ—ãƒ­ã‚»ã‚¹ã‚’åœæ­¢ã—ã¾ã—ãŸ"
  fi
done

# .nextãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤
echo "ğŸ—‘ï¸  .nextãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ã¾ã™..."
rm -rf .next
rm -f .next/dev/lock 2>/dev/null

echo ""
echo "âœ… å®Œäº†ï¼å†åº¦ 'npm run dev' ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„"
