# Vercelデプロイチェックリスト

## AWS S3設定

### ✅ 事前準備
- [ ] AWS S3バケットを作成済み
- [ ] IAMユーザーを作成済み
- [ ] アクセスキーIDとシークレットアクセスキーを取得済み
- [ ] S3バケットのCORS設定にVercelドメインを追加済み

### ✅ Vercel環境変数の設定
以下の環境変数をVercelダッシュボードで設定：

- [ ] `AWS_REGION` = `ap-northeast-1`（または使用するリージョン）
- [ ] `AWS_ACCESS_KEY_ID` = あなたのアクセスキーID
- [ ] `AWS_SECRET_ACCESS_KEY` = あなたのシークレットアクセスキー
- [ ] `AWS_S3_BUCKET_NAME` = バケット名（例: `meishiplus-images`）

### ✅ 環境変数の適用範囲
各環境変数に対して以下を選択：
- [ ] Production（本番環境）
- [ ] Preview（プレビュー環境）
- [ ] Development（開発環境）

### ✅ デプロイ後の確認
- [ ] デプロイが成功している
- [ ] エディターページ（`/top/mypage/editor`）にアクセスできる
- [ ] 画像アップロード機能が動作する
- [ ] ブラウザのコンソールにエラーがない

## トラブルシューティング

### エラー: "AWS S3 configuration is missing"
1. Vercelダッシュボードで環境変数が設定されているか確認
2. 環境変数名が正確か確認（大文字小文字に注意）
3. デプロイを再実行

### エラー: CORS policy
1. S3バケットのCORS設定を確認
2. `*.vercel.app`が許可されているか確認
3. カスタムドメインを使用している場合は、そのドメインも追加

### 画像がアップロードできない
1. IAMポリシーが正しく設定されているか確認
2. ブラウザの開発者ツール（F12）でネットワークタブを確認
3. エラーメッセージを確認

## セキュリティチェックリスト

- [ ] `.env.local`が`.gitignore`に含まれている
- [ ] アクセスキーがGitにコミットされていない
- [ ] IAMポリシーが最小権限の原則に従っている
- [ ] 本番環境と開発環境で異なるアクセスキーを使用（推奨）
